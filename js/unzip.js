//加解密H4数据-解压缩
var pako = require("pako");
var atob = require('atob');
//var btoa = hitchhiker.require('btoa')
//解压
function unzip(b64Data){
    var strData = (atob(b64Data));
     // Convert binary string to character-number array
    var charData = strData.split('').map(function(x){return x.charCodeAt(0);});
    // Turn number array into byte-array
    var binData = new Uint8Array(charData);
    // // unzip
    var data = pako.inflate(binData);
    // Convert gunzipped byteArray back to ascii string:
    strData = String.fromCharCode.apply(null, new Uint16Array(data));
    return decodeURIComponent(strData);
}
//压缩
function zip(str) {
    str = encodeURIComponent(str)
    var binaryString = pako.gzip(str, {to: 'string'});
    return btoa(binaryString);
}



/*
req_data1 = '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'

var s = unzip(req_data1);
console.log("unzipped:");
//console.log(s);

var data = zip(JSON.stringify(s));
console.log("zipped:");
//console.log(data);
//console.log(decodeURIComponent('中文');
*/





var req_data = {"PlanID":"","FromRowNumber":0,"ToRowNumber":100,"SortString":"","ConditionSQL":"104,196,85,234,208,172,128,70,193,236,165,180,5,248,85,121,100,196,124,124,172,114,44,103,154,150,136,58,184,56,74,13,169,29,216,82,250,161,42,114,167,90,181,249,98,118,218,74,238,90,80,145,58,9,209,78,185,122,251,130,67,101,185,171,107,27,30,203,0,90,233,191,180,84,231,8,204,208,124,198,237,162,154,212,227,224,91,166,182,11,33,10,213,88,213,67,15,251,65,183,200,77,237,108,227,135,71,247,232,153,106,216","AHotelCd":"LC01","FieldList":[{"FieldName":"acct_num","FieldValue":"account.acct_num"},{"FieldName":"no_post","FieldValue":"account.no_post"},{"FieldName":"crsresv_flg","FieldValue":"account.crsresv_flg"},{"FieldName":"payment_tp","FieldValue":"(case when upper(account.payment_tp) ='PP' then '预付' else '现付' end) as payment_tp"},{"FieldName":"rm_cmnt","FieldValue":"rmstus.rm_cmnt"},{"FieldName":"rm_att","FieldValue":"rmstus.rm_att"},{"FieldName":"remind_flg","FieldValue":"(select case when count(*)>0 then 1 else 0 end  from spcinfo  WITH (nolock)  where spc_typ = '5' and acct_num = account.acct_num) as remind_flg"},{"FieldName":"preference_flg","FieldValue":"(select case when count(*)>0 then 1 else 0 end  from ghpreference  WITH (nolock) where gh_num in (select gh_num from account as tba with (nolock) where tba.acct_num = account.acct_num)) as preference_flg"},{"FieldName":"pricechange_flg","FieldValue":"account.posresv_flg as pricechange_flg"},{"FieldName":"arr_dt","FieldValue":"( CASE\tWHEN account.arr_dt = '1900-1-1' THEN NULL ELSE account.arr_dt\tEND\t) AS arr_dt"},{"FieldName":"dpt_dt","FieldValue":"( CASE\tWHEN account.dpt_dt = '1900-1-1' THEN NULL ELSE\taccount.dpt_dt\tEND ) AS dpt_dt"},{"FieldName":"shr_num","FieldValue":"account.shr_num"},{"FieldName":"rm_num","FieldValue":"account.rm_num"},{"FieldName":"partner_num","FieldValue":"account.partner_num"},{"FieldName":"gh_nm","FieldValue":"history.gh_nm"},{"FieldName":"gh_num","FieldValue":"history.gh_num"},{"FieldName":"acct_stus","FieldValue":"account.acct_stus"},{"FieldName":"acct_bal","FieldValue":"account.acct_bal"},{"FieldName":"notice","FieldValue":"account.notice"},{"FieldName":"rm_typ","FieldValue":"account.rm_typ"},{"FieldName":"rt_amt","FieldValue":"account.rt_amt"},{"FieldName":"key_flg","FieldValue":"account.key_flg"},{"FieldName":"no_prt","FieldValue":"account.no_prt"},{"FieldName":"Preg_flg","FieldValue":"account.Preg_flg"},{"FieldName":"resv_num","FieldValue":"account.resv_num"},{"FieldName":"GrpCd","FieldValue":"history.gh_nm AS GrpCd"},{"FieldName":"exrm_flg","FieldValue":"account.exrm_flg"},{"FieldName":"AcctStus","FieldValue":"(CASE account.acct_stus\r\n\t\t                                                            WHEN '@' THEN\r\n\t\t\t                                                            '预订删除'\r\n\t\t                                                            WHEN '*' THEN\r\n\t\t\t                                                            '预订取消'\r\n\t\t                                                            WHEN '!' THEN\r\n\t\t\t                                                            '已结'\r\n\t\t                                                            WHEN '&' THEN\r\n\t\t\t                                                            '作废'\r\n\t\t                                                            WHEN '0' THEN\r\n\t\t\t                                                            '未到'\r\n\t\t                                                            WHEN '1' THEN\r\n\t\t\t                                                            '预订'\r\n\t\t                                                            WHEN '4' THEN\r\n\t\t\t                                                            '在店'\r\n\t\t                                                            WHEN '5' THEN\r\n\t\t\t                                                            '已结'\r\n\t\t                                                            WHEN '6' THEN\r\n\t\t\t                                                            '应收'\r\n\t\t                                                            WHEN 'G' THEN\r\n\t\t\t                                                            '团队'\r\n\t\t                                                            WHEN 'S' THEN\r\n\t\t\t                                                            '统计账户'\r\n\t\t                                                            WHEN 'I' THEN\r\n\t\t\t                                                            '内部帐户'\r\n\t\t                                                            WHEN 'U' THEN\r\n\t\t\t                                                            '待结帐户'\r\n\t\t                                                            END\r\n\t                                                            ) AS AcctStus"}]};
// Output to console
var zip_data='H4sIAAAAAAAAA+VZ227bOBD9ln0g4hRoQFL3R8lWmgCGka3T7aOhyIwt1JIMWt5u/n45Q93sbCWhD7soF7Apmjw8M5zDywgmXkQ4fzokxeNCVYgVQgmfuSrvZZl/Lr+vzvmLkLqb6p7n8qqd0bpnXcpqXcms2L3nm5fFNquyslj/vmx7GbVVLwtcVfqOKrgFDZz60OzBUMah7lHEWQgBNHMBznxox4G233AwzqCktKVm3O5KzcqgbmMDBVbmYN3BQWjBQR98aHbgt4cAxLoBWMSCoetAyfVYF4zbnQ3meqoMsM9n6CkMDJCd+cjhN/Tc8hswzozZTuMJWqNQetoxPVVtGSdswQi0xijrIJ6OBrRzKBDGcdK0McYtnFfA2pj62h1oQB9pTxcdR5wBt9Cey9sQcoYuoSmOSM3qohC+Dgy4gRbROAbV99uqnoPTzqyWGsVHVT2vM40uaXPMAqCng6wh2i9tym30qldk+FBW4jDftqtxOYe4Nes/E4ftMjtVdbcTEdwv2L5KctEOS9K02hTn/HLoH8nhfIEpz0V118d6C4D/gLQoN8dSGx/j7EEHKVN5kuL05+b1sJtCewUfpD4mb7koqk11HGKepclJ/aLf96JQj/PxKOSsMddR3Ko+Yi1unp5uVK3S4BsSByTkRK3L2CZRRAIfesUBGVWvR/yYRPSyt9gCWXJSxaWLg7OR+SbNi8HYy/xUnU93PeQYY1JNJKyBw3wiz4rtmJKzkziIVLHRy8BjwGcfbokV0y7CrAsn1bEDHTh9VReBepyOaVa8lrrt6+Pzg3rMivJQpt9udaNil0IjN9XbUasI4jigRYJ83fqvO683RqvX5RSHV58Ur8p0kYp/NSK7fWf4R2FpYrLb17POgLhzo22vOetwNEGoXhIgyar9P9Oq/rvxkHZ74F2gRuKapSLdJ8VuNLDtLi57h0Zj9B3LoNVEys12cK/MFOs8XMfEmVdfH+JVf8714GbpsYDSj+wjgxX4rKGrL0uVgNB4qQjeDVSM8WoBDwhauAZE68+g29tj9fNuN4Mnuq0IrkbWfnPaut35M+j2aS+n3l096NhhN5GxQ47cLrIqxGQ/r+CD1LD/Bkn3KgMo5dtdCxylG3ayzzfBP9zDcDNMTi4a8DjtS3KYzFpjR1KWKkvFFMoOObaQ8B6ZtJBq5DBhtUnySTlVhxwk/Cbepp6MPeho4icn531y3McnKXZTnexjRxIQdchP3eU97CDpJ3nU2fjEzagPunbUILf4S62RiVHoYwdJQ7U11iObc4ZH/tWtjJvUmUv1LeDsxi+mEL/Wp77GbohN26vqelq/6NT6Lxw+CWOoxw5Rr6khha5A9do3Jon44f8i4T0JXBK7JHKVnEZJ+JuBEjok8kjE4Q0fXuwtowQj3DVQMptECxLMUbuQBPdGSWbiTeeCWmFYX3ARNUowZqBg1/eaUYLZBgrm4A7zmyPRM0owx0jBDE47TEw69May8TJTCYhrlGCfjBQsiPCVTL1M+6ZliWsDBdMn4X2TdDCoRDYJ8WUa8kazbrVHAyVU+b2SyoE951tNPqI2HzVTwi9GShjFKGGdmBgqof4btpvGf+3PT3za/2L7/xN4aloLVf4Nwn/4sH4nAAA='

console.log(b64Encode(zip_data))
var data = zip(JSON.stringify(req_data));
console.log("zipped:");
console.log(data);

var s = unzip(data);
console.log("unzipped:");
console.log(s);